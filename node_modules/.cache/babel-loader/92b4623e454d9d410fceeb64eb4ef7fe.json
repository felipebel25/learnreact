{"ast":null,"code":"import _regeneratorRuntime from\"/home/pegasus/Escritorio/cursos/react/platzi-badges/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/pegasus/Escritorio/cursos/react/platzi-badges/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/pegasus/Escritorio/cursos/react/platzi-badges/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/pegasus/Escritorio/cursos/react/platzi-badges/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/pegasus/Escritorio/cursos/react/platzi-badges/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/pegasus/Escritorio/cursos/react/platzi-badges/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import BadgeDetails from'./BadgeDetails';import PageLoading from'../components/PageLoading';import api from'../api';var BadgeDetailsContainer=/*#__PURE__*/function(_React$Component){_inherits(BadgeDetailsContainer,_React$Component);var _super=_createSuper(BadgeDetailsContainer);function BadgeDetailsContainer(){var _this;_classCallCheck(this,BadgeDetailsContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={loading:true,error:null,data:undefined,modalIsOpen:false};_this.handleOpenModal=function(e){_this.setState({modalIsOpen:true});};_this.handleCloseModal=function(e){_this.setState({modalIsOpen:false});};_this.handleDeleteBadge=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({loading:true,error:null});_context.prev=1;_context.next=4;return api.badges.remove(_this.props.match.params.badgeId,_this.setState({loading:false}));case 4:_this.props.history.push('/Badges');_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);_this.setState({loading:false,error:_context.t0});case 10:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.fetchData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({loading:true,error:null});_context2.prev=1;_context2.next=4;return api.badges.read(_this.props.match.params.badgeId);case 4:data=_context2.sent;_this.setState({loading:false,data:data});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);_this.setState({loading:false,error:_context2.t0});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return _this;}_createClass(BadgeDetailsContainer,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchData();}},{key:\"render\",value:function render(){if(this.state.loading){return/*#__PURE__*/React.createElement(PageLoading,null);}var badge=this.state.data;return/*#__PURE__*/React.createElement(BadgeDetails,{onOpenModal:this.handleOpenModal,onCloseModal:this.handleCloseModal,onDeleteBadge:this.handleDeleteBadge,modalIsOpen:this.state.modalIsOpen,badge:this.state.data});}}]);return BadgeDetailsContainer;}(React.Component);export default BadgeDetailsContainer;","map":{"version":3,"sources":["/home/pegasus/Escritorio/cursos/react/platzi-badges/src/pages/BadgeDetailsContainer.js"],"names":["React","Component","BadgeDetails","PageLoading","api","BadgeDetailsContainer","state","loading","error","data","undefined","modalIsOpen","handleOpenModal","e","setState","handleCloseModal","handleDeleteBadge","badges","remove","props","match","params","badgeId","history","push","fetchData","read","badge"],"mappings":"ixBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CAEA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CAEA,MAAOC,CAAAA,GAAP,KAAgB,QAAhB,C,GAEMC,CAAAA,qB,mYACFC,K,CAAO,CACHC,OAAO,CAAE,IADN,CAEHC,KAAK,CAAC,IAFH,CAGHC,IAAI,CAAEC,SAHH,CAIHC,WAAW,CAAE,KAJV,C,OASPC,e,CAAkB,SAAAC,CAAC,CAAG,CAClB,MAAKC,QAAL,CAAc,CAAEH,WAAW,CAAE,IAAf,CAAd,EACH,C,OAEDI,gB,CAAmB,SAAAF,CAAC,CAAG,CACnB,MAAKC,QAAL,CAAc,CAAEH,WAAW,CAAE,KAAf,CAAd,EACH,C,OACDK,iB,0FAAmB,iBAAMH,CAAN,kHACf,MAAKC,QAAL,CAAc,CAAEP,OAAO,CAAC,IAAV,CAAgBC,KAAK,CAAC,IAAtB,CAAd,EADe,sCAGLJ,CAAAA,GAAG,CAACa,MAAJ,CAAWC,MAAX,CACF,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,OADtB,CAEF,MAAKR,QAAL,CAAc,CAAEP,OAAO,CAAC,KAAV,CAAd,CAFE,CAHK,QAOX,MAAKY,KAAL,CAAWI,OAAX,CAAmBC,IAAnB,CAAwB,SAAxB,EAPW,+EASX,MAAKV,QAAL,CAAc,CAAEP,OAAO,CAAC,KAAV,CAAiBC,KAAK,YAAtB,CAAd,EATW,oE,qEAanBiB,S,sEAAY,iJACR,MAAKX,QAAL,CAAc,CAACP,OAAO,CAAC,IAAT,CAAeC,KAAK,CAAC,IAArB,CAAd,EADQ,wCAGeJ,CAAAA,GAAG,CAACa,MAAJ,CAAWS,IAAX,CAAgB,MAAKP,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBC,OAAxC,CAHf,QAGEb,IAHF,gBAIJ,MAAKK,QAAL,CAAc,CAACP,OAAO,CAAE,KAAV,CAAiBE,IAAI,CAACA,IAAtB,CAAd,EAJI,mFAMA,MAAKK,QAAL,CAAc,CAACP,OAAO,CAAE,KAAV,CAAiBC,KAAK,aAAtB,CAAd,EANA,sE,oFAvBZ,4BAAmB,CACf,KAAKiB,SAAL,GACH,C,sBA+BG,iBAAS,CACT,GAAG,KAAKnB,KAAL,CAAWC,OAAd,CAAsB,CAClB,mBAAO,oBAAC,WAAD,MAAP,CACH,CAGL,GAAMoB,CAAAA,KAAK,CAAG,KAAKrB,KAAL,CAAWG,IAAzB,CACI,mBACE,oBAAC,YAAD,EACE,WAAW,CAAE,KAAKG,eADpB,CAEE,YAAY,CAAE,KAAKG,gBAFrB,CAGE,aAAa,CAAE,KAAKC,iBAHtB,CAIE,WAAW,CAAE,KAAKV,KAAL,CAAWK,WAJ1B,CAKE,KAAK,CAAE,KAAKL,KAAL,CAAWG,IALpB,EADF,CAUH,C,mCAzD+BT,KAAK,CAACC,S,EA4D1C,cAAeI,CAAAA,qBAAf","sourcesContent":["import React, { Component } from 'react'\n\nimport BadgeDetails from './BadgeDetails'\nimport PageLoading from '../components/PageLoading'\n\nimport api from '../api'\n\nclass BadgeDetailsContainer extends React.Component {\n    state ={\n        loading: true,\n        error:null,\n        data: undefined,\n        modalIsOpen: false,\n    }\n    componentDidMount(){\n        this.fetchData()\n    }\n    handleOpenModal = e =>{\n        this.setState({ modalIsOpen: true })\n    }\n\n    handleCloseModal = e =>{\n        this.setState({ modalIsOpen: false })\n    }\n    handleDeleteBadge= async e =>{\n        this.setState({ loading:true, error:null})\n        try {\n            await api.badges.remove(\n                this.props.match.params.badgeId,\n                this.setState({ loading:false})\n            )\n            this.props.history.push('/Badges')\n        } catch (error) {\n            this.setState({ loading:false, error})\n            \n        }\n    }\n    fetchData = async () =>{\n        this.setState({loading:true, error:null})\n        try {\n            const data = await api.badges.read(this.props.match.params.badgeId);\n            this.setState({loading: false, data:data})\n            } catch (error) {\n                this.setState({loading: false, error:error})\n                \n            }\n        } \n        render() {\n        if(this.state.loading){\n            return <PageLoading/>\n        }\n        \n\n    const badge = this.state.data;\n        return (\n          <BadgeDetails \n            onOpenModal={this.handleOpenModal}\n            onCloseModal={this.handleCloseModal}\n            onDeleteBadge={this.handleDeleteBadge}\n            modalIsOpen={this.state.modalIsOpen}\n            badge={this.state.data}\n          \n          />\n        )\n    }\n}\n\nexport default BadgeDetailsContainer\n"]},"metadata":{},"sourceType":"module"}